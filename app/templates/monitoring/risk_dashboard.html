{% extends "base.html" %}

{% block content %}
<div class="space-y-6">
    <!-- Risk Summary -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-red-50 border border-red-200 rounded-xl p-5">
            <p class="text-sm text-red-600">High Risk</p>
            <p class="text-3xl font-bold text-red-700">{{ high_risk|length }}</p>
        </div>
        <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-5">
            <p class="text-sm text-yellow-600">Medium Risk</p>
            <p class="text-3xl font-bold text-yellow-700">{{ medium_risk|length }}</p>
        </div>
        <div class="bg-green-50 border border-green-200 rounded-xl p-5">
            <p class="text-sm text-green-600">Low Risk</p>
            <p class="text-3xl font-bold text-green-700">{{ low_risk|length }}</p>
        </div>
    </div>

    <!-- High Risk Projects -->
    {% if high_risk %}
    <div class="bg-white rounded-xl shadow-sm border border-red-200 p-6">
        <h3 class="text-lg font-semibold text-red-700 mb-4">High Risk Projects</h3>
        <div class="space-y-3">
            {% for p in high_risk %}
            <div class="p-3 bg-red-50 rounded-lg flex justify-between items-center">
                <div>
                    <p class="font-medium text-gray-900">{{ p.title }}</p>
                    <p class="text-sm text-gray-500">{{ p.school_name }}</p>
                </div>
                <div class="text-right">
                    {% if p.is_delayed %}<span class="text-xs text-yellow-700">{{ p.delay_days }}d delayed</span>{% endif %}
                    {% if p.is_over_budget %}<span class="text-xs text-red-700 ml-2">Over budget</span>{% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Medium Risk Projects -->
    {% if medium_risk %}
    <div class="bg-white rounded-xl shadow-sm border border-yellow-200 p-6">
        <h3 class="text-lg font-semibold text-yellow-700 mb-4">Medium Risk Projects</h3>
        <div class="space-y-3">
            {% for p in medium_risk %}
            <div class="p-3 bg-yellow-50 rounded-lg flex justify-between items-center">
                <div>
                    <p class="font-medium text-gray-900">{{ p.title }}</p>
                    <p class="text-sm text-gray-500">{{ p.school_name }}</p>
                </div>
                <span class="text-sm text-gray-600">{{ p.current_amount|currency }}</span>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
